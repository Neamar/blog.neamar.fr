<!DOCTYPE html>
<html lang="en-gb" dir="ltr">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta charset="utf-8" />
	<base href="https://blog.neamar.fr" />
	<meta name="keywords" content="Ubuntu, authentification, echoué, network, manager, kate, linux" />
	<meta name="author" content="Neamar" />
	<meta name="description" content="Distributeur de liens !" />
	<meta name="generator" content="Joomla! - Open Source Content Management" />
	<title>L'authentification a échoué...</title>
	<link href="https://blog.neamar.fr/autres-articles/15-authentification-echoue-gdm-login-ubuntu" rel="canonical" />
	<link href="/templates/protostar/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
	<link href="/templates/protostar/css/template.css?4847224b99c9894da868618d8285f3c1" rel="stylesheet" />
	<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" />
	<style>

	h1, h2, h3, h4, h5, h6, .site-title {
		font-family: 'Open Sans', sans-serif;
	}
	body.site {
		border-top: 3px solid #0088cc;
		background-color: #f4f6f7;
	}
	a {
		color: #0088cc;
	}
	.nav-list > .active > a,
	.nav-list > .active > a:hover,
	.dropdown-menu li > a:hover,
	.dropdown-menu .active > a,
	.dropdown-menu .active > a:hover,
	.nav-pills > .active > a,
	.nav-pills > .active > a:hover,
	.btn-primary {
		background: #0088cc;
	}
	</style>
	<script src="/media/jui/js/jquery.min.js"></script>
	<script src="/media/jui/js/jquery-noconflict.js"></script>
	<script src="/media/jui/js/jquery-migrate.min.js"></script>
	<script src="/media/system/js/caption.js"></script>
	<script src="/media/jui/js/bootstrap.min.js"></script>
	<script src="/templates/protostar/js/template.js?4847224b99c9894da868618d8285f3c1"></script>
	<script>
jQuery(window).on('load',  function() {
				new JCaption('img.caption');
			});jQuery(function($){ $(".hasTooltip").tooltip({"html": true,"container": "body"}); });
	</script>

	<!--[if lt IE 9]><script src="/media/jui/js/html5.js"></script><![endif]-->
</head>
<body class="site com_content view-article no-layout no-task itemid-103">
	<!-- Body -->
	<div class="body">
		<div class="container">
			<!-- Header -->
			<header class="header" role="banner">
				<div class="header-inner clearfix">
					<a class="brand pull-left" href="/">
						<span class="site-title" title="Blog de Neamar">Blog de Neamar</span>											</a>
					<div class="header-search pull-right">
						
					</div>
				</div>
			</header>
						
			<div class="row-fluid">
								<main id="content" role="main" class="span9">
					<!-- Begin Content -->
					
					<div id="system-message-container">
	</div>

					<div class="item-page" itemscope itemtype="https://schema.org/Article">
	<meta itemprop="inLanguage" content="en-GB" />
	
		
			<div class="page-header">
					<h2 itemprop="headline">
				L'authentification a échoué...			</h2>
									</div>
							
<div class="icons">
	
					<div class="btn-group pull-right">
				<a class="btn dropdown-toggle" data-toggle="dropdown" href="#"> <span class="icon-cog"></span><span class="caret"></span> </a>
								<ul class="dropdown-menu">
																<li class="email-icon"> <a href="/component/mailto/?tmpl=component&amp;template=protostar&amp;link=1b8553bd003d5b3480e33b1b8f252a57a6eb8d5d" title="Email this link to a friend" onclick="window.open(this.href,'win2','width=400,height=350,menubar=yes,resizable=yes'); return false;" rel="nofollow"><span class="icon-envelope"></span>Email</a> </li>
														</ul>
			</div>
		
	</div>
			
				<dl class="article-info muted">

		
			<dt class="article-info-term">
									Details							</dt>

							<dd class="createdby" itemprop="author" itemscope itemtype="https://schema.org/Person">
					Written by <span itemprop="name">Neamar</span>	</dd>
			
			
										<dd class="category-name">
													Category: <span itemprop="genre">Articles du blog</span>							</dd>			
					
												<dd class="create">
					<span class="icon-calendar"></span>
					<time datetime="2009-09-21T14:44:18+00:00" itemprop="dateCreated">
						Created: 21 September 2009					</time>
			</dd>			
										<dd class="modified">
				<span class="icon-calendar"></span>
				<time datetime="2013-08-06T23:18:27+00:00" itemprop="dateModified">
					Last Updated: 06 August 2013				</time>
			</dd>			
						</dl>
	
	
				
								<div itemprop="articleBody">
		<p>Vous avez un superbe Ubuntu qui fonctionne niquel... et puis voilà qu'un bon jour, après un reboot, vous restez coincé sur l'écran de login : dès son affichage, un message s'affiche : « L'authentification a échoué » alors que vous n'avez rien marqué ? Un clic sur valider n'apporte rien ? Pas de panique ! On peut s'en sortir...</p>

 <p><em>Note : si vous avez ce message APRÈS avoir entré login et mot de passe, il est probable que votre clavier ait été transformé en QWERTY. Vérifiez cela en tapant votre mot de passe dans la case login (à l'abri des regards indiscrets !).</em></p>

<p>Ce qui est agréable sous Ubuntu, c'est qu'on a pas besoin de redémarrer souvent. En contrepartie, si on fait une connerie un jour, on peut ne s'en apercevoir qu'un mois plus tard ! C'est mon cas dans cette situation... je souhaitais modifier l'applet network manager, pour ne pas avoir à déverrouiller le trousseau de clés à chaque login. Il semblerait que cela n'est pas fonctionné... Étape par étape, analysons comment sortir de cette galère.</p>

<h2>Se connecter</h2>
<p>Il parait logique que pour corriger le problème, nous allons avoir besoin d'un accès à la machine... et l'écran de log ne nous apporte pas grand chose. Ouvrez un terminal(<tt>Ctrl-Alt-F1</tt>) et connectez-vous avec votre paire login / mot de passe. Retournez ensuite sur le serveur X avec <tt>Ctrl-Alt-F7</tt>, puis tuez-le : <tt>Ctrl-Alt-Backspace (←)</tt>.</p>

<p>Vous devriez maintenant être retourné sur la console que vous venez d'ouvrir, sinon refaites <tt>Ctrl-Alt-F1</tt>. De là, marquez la commande <tt>startx</tt>, qui ne vous embêtera pas avec l'écran de connexion puisque vous êtes déjà loggé. L'environnement risque d'être un peu différent par rapport à d'habitude, mais ne vous en faites pas ce n'est que temporaire – pas de soucis à avoir pour les notifications qui font n'importe quoi ou l'impossibilité d'arrêter la machine.</p>

<h2>Corriger le problème</h2>
<p>Vous avez maintenant récupéré un environnement graphique (youpi), reste à corriger le problème pour éviter qu'il se reproduise !<br />
<em>À priori</em>, et comme je le disais en introduction, vous avez modifié volontairement ou involontairement le network / trousseau de clé / gdm. Il faut donc corriger cela en effectuant la modification inverse à celle effectuée auparavant.<br />
Ouvrez donc un terminal, et marquez <tt>sudo kate /etc/pam.d/gdm</tt> (remplacez kate par votre éditeur de texte préféré, gedit, vi, emacs...).<br />
Enlevez les dernières lignes pour obtenir quelque chose de ce type :</p>

<pre>
#%PAM-1.0
auth    requisite       pam_nologin.so
auth    required        pam_env.so readenv=1
auth    required        pam_env.so readenv=1 envfile=/etc/default/locale
@include common-auth
auth    optional        pam_gnome_keyring.so
@include common-account
session required        pam_limits.so
@include common-session
session optional        pam_gnome_keyring.so auto_start
@include common-password
</pre>

<p>Dans mon cas, il a fallu enlever ces deux lignes :</p>
<pre>
auth optional pam_keyring.so try_first_pass
session optional pam_keyring.so
</pre>

<p>Enregistrez.</p>

<h2>Pour finir</h2>

<p>Pour finir, fermez toutes vos applications ouvertes, puis retournez sur la console <tt>Ctrl-Alt-F1</tt>, envoyez le signal d'interruption (<tt>Ctrl-Z</tt>), et entrez <tt>sudo shutdown 0</tt>. Entrez votre mot de passe, validez... quelques secondes après, vous devirez vous retrouver sur l'écran de login... sans problème, cette fois !</p>	</div>

	
							</div>

					
<ul itemscope itemtype="https://schema.org/BreadcrumbList" class="breadcrumb">
			<li>
			You are here: &#160;
		</li>
	
				<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
									<a itemprop="item" href="/" class="pathway"><span itemprop="name">Home</span></a>
				
									<span class="divider">
						<img src="/media/system/images/arrow.png" alt="" />					</span>
								<meta itemprop="position" content="1">
			</li>
					<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
									<a itemprop="item" href="/autres-articles" class="pathway"><span itemprop="name">Articles du blog</span></a>
				
									<span class="divider">
						<img src="/media/system/images/arrow.png" alt="" />					</span>
								<meta itemprop="position" content="2">
			</li>
					<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" class="active">
				<span itemprop="name">
					L'authentification a échoué...				</span>
				<meta itemprop="position" content="3">
			</li>
		</ul>

					<!-- End Content -->
				</main>
									<div id="aside" class="span3">
						<!-- Begin Right Sidebar -->
						<div class="well _menu"><h3 class="page-header">Main Menu</h3><ul class="nav menu">
<li class="item-104 default"><a href="/" >Blog de Neamar</a></li><li class="item-103 current active"><a href="/autres-articles" >Articles du blog</a></li><li class="item-105"><a href="/les-liens-du-jeudi" >Les liens du jeudi</a></li></ul>
</div>
						<!-- End Right Sidebar -->
					</div>
							</div>
		</div>
	</div>
	<!-- Footer -->
	<footer class="footer" role="contentinfo">
		<div class="container">
			<hr />
			
			<p class="pull-right">
				<a href="#" id="back-top">
					Back to Top				</a>
			</p>
			<p>
				&copy; 2024 Blog de Neamar			</p>
		</div>
	</footer>
	
</body>
</html>
